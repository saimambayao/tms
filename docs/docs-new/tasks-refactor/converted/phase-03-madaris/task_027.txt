# Task ID: 027
# Title: Rename Chapter Model to Madrasah
# Status: pending
# Dependencies: 026
# Priority: high
# Description: Rename Chapter model to Madrasah using Django's RenameModel migration. This preserves all data while changing model/table names.

# Details:
Rename Chapter model to Madrasah using Django's RenameModel migration. This preserves all data while changing model/table names.

## Implementation Steps:
1. Update model name in chapters/models.py:
   ```python
   # Before
   class Chapter(models.Model):
       ...

   # After
   class Madrasah(models.Model):
       ...
       class Meta:
           db_table = 'chapters_madrasah'
           verbose_name = 'Madrasah'
           verbose_name_plural = 'Madaris'
   ```
2. Create migration:
   ```bash
   cd /Users/saidamenmambayao/apps/madaris-ms
   python manage.py makemigrations chapters --name rename_chapter_to_madrasah
   ```
3. Review migration file - should contain:
   ```python
   operations = [
       migrations.RenameModel(
           old_name='Chapter',
           new_name='Madrasah',
       ),
   ]
   ```
4. Test on staging:
   ```bash
   python manage.py migrate chapters --database=staging
   ```
5. Verify data preserved:
   ```python
   from apps.chapters.models import Madrasah
   print(Madrasah.objects.count())
   # Should match Chapter count from backup log
   ```
6. Verify table renamed:
   ```sql
   SELECT table_name FROM information_schema.tables WHERE table_name LIKE '%chapter%';
   # Should show chapters_madrasah
   ```
7. Test in Django admin

## Acceptance Criteria:
- Migration file created with RenameModel operation
- Migration tested on staging database
- Table renamed: chapters_chapter â†’ chapters_madrasah
- All data preserved (row count matches)
- Foreign keys still work
- Admin interface shows Madrasah model
- No data loss

## Files Modified:
- `src/apps/chapters/models.py`
- `src/apps/chapters/migrations/000X_rename_chapter_to_madrasah.py`

## Important Notes:
- RenameModel is safe - preserves all data
- Table name changed but data intact
- Will update imports in next task
- Estimate: 30 minutes

# Test Strategy:
1. Verify migration file syntax with `python manage.py sqlmigrate`
2. Test forward migration on staging database
3. Test reverse migration to ensure rollback works
4. Verify no data loss during migration
5. Run full test suite to catch regressions
6. Run migrations and verify schema changes
7. Create test instances to verify new fields
8. Test admin interface with new fields
9. Verify backward compatibility with existing data
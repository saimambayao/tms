# Task ID: 071
# Title: Update Student Templates
# Status: pending
# Dependencies: 011, 070
# Priority: medium
# Description: Create and update templates for student-related views including list, detail, enrollment, and profile templates. These templates will use the terminol

# Details:
Create and update templates for student-related views including list, detail, enrollment, and profile templates. These templates will use the terminology from the context processor and follow the existing design patterns.

## Implementation Steps:
1. Create student list template:
   ```bash
   cat > /Users/saidamenmambayao/apps/madaris-ms/src/apps/constituents/templates/constituents/student_list.html << 'EOF'
   {% extends "base.html" %}
   {% load static %}

   {% block title %}Students - {{ block.super }}{% endblock %}

   {% block content %}
   <div class="container mx-auto px-4 py-8">
       <!-- Header -->
       <div class="flex justify-between items-center mb-6">
           <h1 class="text-3xl font-bold text-gray-900">Students</h1>
           <a href="{% url 'enroll_student' %}" class="btn btn-primary">
               + Enroll New Student
           </a>
       </div>

       <!-- Search and Filters -->
       <div class="bg-white rounded-lg shadow p-6 mb-6">
           <form method="get" class="space-y-4">
               <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                   <div>
                       <input
                           type="text"
                           name="search"
                           value="{{ request.GET.search }}"
                           placeholder="Search students..."
                           class="form-input w-full rounded-md border-gray-300"
                       />
                   </div>
                   <div>
                       <select name="status" class="form-select w-full rounded-md border-gray-300">
                           <option value="">All Statuses</option>
                           {% for status, label in status_choices %}
                           <option value="{{ status }}" {% if request.GET.status == status %}selected{% endif %}>
                               {{ label }}
                           </option>
                           {% endfor %}
                       </select>
                   </div>
                   <div>
                       <input
                           type="text"
                           name="grade"
                           value="{{ request.GET.grade }}"
                           placeholder="Grade level..."
                           class="form-input w-full rounded-md border-gray-300"
                       />
                   </div>
                   <div>
                       <button type="submit" class="btn btn-secondary w-full">
                           Filter
                       </button>
                   </div>
               </div>
           </form>
       </div>

       <!-- Students Table -->
       <div class="bg-white rounded-lg shadow overflow-hidden">
           <table class="min-w-full divide-y divide-gray-200">
               <thead class="bg-gray-50">
                   <tr>
                       <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                           Student Number
                       </th>
                       <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                           Name
                       </th>
                       <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                           Status
                       </th>
                       <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                           Grade Level
                       </th>
                       <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                           Madrasah
                       </th>
                       <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                           Actions
                       </th>
                   </tr>
               </thead>
               <tbody class="bg-white divide-y divide-gray-200">
                   {% for student in students %}
                   <tr class="hover:bg-gray-50">
                       <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                           {{ student.student_number }}
                       </td>
                       <td class="px-6 py-4 whitespace-nowrap">
                           <div class="text-sm font-medium text-gray-900">
                               {{ student.first_name }} {{ student.last_name }}
                           </div>
                       </td>
                       <td class="px-6 py-4 whitespace-nowrap">
                           <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full
                               {% if student.enrollment_status == 'enrolled' %}bg-green-100 text-green-800
                               {% elif student.enrollment_status == 'graduate' %}bg-blue-100 text-blue-800
                               {% elif student.enrollment_status == 'dropout' %}bg-red-100 text-red-800
                               {% else %}bg-gray-100 text-gray-800{% endif %}">
                               {{ student.get_enrollment_status_display }}
                           </span>
                       </td>
                       <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                           {{ student.current_grade_level|default:"-" }}
                       </td>
                       <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                           {{ student.madrasah_name|default:"-" }}
                       </td>
                       <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                           <a href="{% url 'student_detail' student.pk %}" class="text-blue-600 hover:text-blue-900 mr-3">
                               View
                           </a>
                           <a href="{% url 'change_student_status' student.pk %}" class="text-indigo-600 hover:text-indigo-900">
                               Change Status
                           </a>
                       </td>
                   </tr>
                   {% empty %}
                   <tr>
                       <td colspan="6" class="px-6 py-4 text-center text-gray-500">
                           No students found.
                       </td>
                   </tr>
                   {% endfor %}
               </tbody>
           </table>
       </div>

       <!-- Pagination -->
       {% if students.has_other_pages %}
       <div class="mt-6 flex justify-center">
           <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px">
               {% if students.has_previous %}
               <a href="?page={{ students.previous_page_number }}" class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                   Previous
               </a>
               {% endif %}

               <span class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700">
                   Page {{ students.number }} of {{ students.paginator.num_pages }}
               </span>

               {% if students.has_next %}
               <a href="?page={{ students.next_page_number }}" class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                   Next
               </a>
               {% endif %}
           </nav>
       </div>
       {% endif %}
   </div>
   {% endblock %}
   EOF
   ```
2. Create student detail template:
   ```bash
   cat > /Users/saidamenmambayao/apps/madaris-ms/src/apps/constituents/templates/constituents/student_detail.html << 'EOF'
   {% extends "base.html" %}
   {% load static %}

   {% block title %}{{ student.first_name }} {{ student.last_name }} - {{ block.super }}{% endblock %}

   {% block content %}
   <div class="container mx-auto px-4 py-8">
       <!-- Header -->
       <div class="mb-6">
           <a href="{% url 'student_list' %}" class="text-blue-600 hover:text-blue-800 mb-4 inline-block">
               ← Back to Students
           </a>
           <div class="flex justify-between items-start">
               <div>
                   <h1 class="text-3xl font-bold text-gray-900">
                       {{ student.first_name }} {{ student.last_name }}
                   </h1>
                   <p class="text-gray-600 mt-1">Student #{{ student.student_number }}</p>
               </div>
               <div class="space-x-2">
                   <a href="{% url 'change_student_status' student.pk %}" class="btn btn-secondary">
                       Change Status
                   </a>
                   <a href="#" class="btn btn-primary">
                       Edit Profile
                   </a>
               </div>
           </div>
       </div>

       <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
           <!-- Main Info -->
           <div class="lg:col-span-2 space-y-6">
               <!-- Personal Information -->
               <div class="bg-white rounded-lg shadow p-6">
                   <h2 class="text-xl font-semibold mb-4">Personal Information</h2>
                   <dl class="grid grid-cols-1 md:grid-cols-2 gap-4">
                       <div>
                           <dt class="text-sm font-medium text-gray-500">Full Name</dt>
                           <dd class="mt-1 text-sm text-gray-900">{{ student.first_name }} {{ student.last_name }}</dd>
                       </div>
                       <div>
                           <dt class="text-sm font-medium text-gray-500">Birth Date</dt>
                           <dd class="mt-1 text-sm text-gray-900">{{ student.birth_date|default:"-" }}</dd>
                       </div>
                       <div>
                           <dt class="text-sm font-medium text-gray-500">Gender</dt>
                           <dd class="mt-1 text-sm text-gray-900">{{ student.get_gender_display|default:"-" }}</dd>
                       </div>
                       <div>
                           <dt class="text-sm font-medium text-gray-500">Address</dt>
                           <dd class="mt-1 text-sm text-gray-900">{{ student.address|default:"-" }}</dd>
                       </div>
                   </dl>
               </div>

               <!-- Madrasah Education -->
               <div class="bg-white rounded-lg shadow p-6">
                   <h2 class="text-xl font-semibold mb-4">Madrasah Education</h2>
                   <dl class="grid grid-cols-1 md:grid-cols-2 gap-4">
                       <div>
                           <dt class="text-sm font-medium text-gray-500">Madrasah</dt>
                           <dd class="mt-1 text-sm text-gray-900">{{ student.madrasah_name|default:"-" }}</dd>
                       </div>
                       <div>
                           <dt class="text-sm font-medium text-gray-500">Current Grade Level</dt>
                           <dd class="mt-1 text-sm text-gray-900">{{ student.current_grade_level|default:"-" }}</dd>
                       </div>
                       <div>
                           <dt class="text-sm font-medium text-gray-500">Madrasah Level</dt>
                           <dd class="mt-1 text-sm text-gray-900">{{ student.get_madrasah_level_display|default:"-" }}</dd>
                       </div>
                       <div>
                           <dt class="text-sm font-medium text-gray-500">Year Enrolled</dt>
                           <dd class="mt-1 text-sm text-gray-900">{{ student.year_enrolled|default:"-" }}</dd>
                       </div>
                       {% if student.year_graduated %}
                       <div>
                           <dt class="text-sm font-medium text-gray-500">Year Graduated</dt>
                           <dd class="mt-1 text-sm text-gray-900">{{ student.year_graduated }}</dd>
                       </div>
                       {% endif %}
                   </dl>
               </div>

               <!-- Family Information -->
               <div class="bg-white rounded-lg shadow p-6">
                   <h2 class="text-xl font-semibold mb-4">Family Information</h2>
                   <dl class="grid grid-cols-1 md:grid-cols-2 gap-4">
                       <div>
                           <dt class="text-sm font-medium text-gray-500">Father's Name</dt>
                           <dd class="mt-1 text-sm text-gray-900">{{ student.father_name|default:"-" }}</dd>
                       </div>
                       <div>
                           <dt class="text-sm font-medium text-gray-500">Mother's Name</dt>
                           <dd class="mt-1 text-sm text-gray-900">{{ student.mother_name|default:"-" }}</dd>
                       </div>
                       <div>
                           <dt class="text-sm font-medium text-gray-500">Guardian Name</dt>
                           <dd class="mt-1 text-sm text-gray-900">{{ student.guardian_name|default:"-" }}</dd>
                       </div>
                       <div>
                           <dt class="text-sm font-medium text-gray-500">Guardian Contact</dt>
                           <dd class="mt-1 text-sm text-gray-900">{{ student.guardian_contact|default:"-" }}</dd>
                       </div>
                   </dl>
               </div>
           </div>

           <!-- Sidebar -->
           <div class="space-y-6">
               <!-- Status Card -->
               <div class="bg-white rounded-lg shadow p-6">
                   <h3 class="text-lg font-semibold mb-4">Enrollment Status</h3>
                   <div class="text-center">
                       <span class="inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold
                           {% if student.enrollment_status == 'enrolled' %}bg-green-100 text-green-800
                           {% elif student.enrollment_status == 'graduate' %}bg-blue-100 text-blue-800
                           {% elif student.enrollment_status == 'dropout' %}bg-red-100 text-red-800
                           {% else %}bg-gray-100 text-gray-800{% endif %}">
                           {{ student.get_enrollment_status_display }}
                       </span>
                   </div>
               </div>

               <!-- Quick Actions -->
               <div class="bg-white rounded-lg shadow p-6">
                   <h3 class="text-lg font-semibold mb-4">Quick Actions</h3>
                   <div class="space-y-2">
                       <a href="{% url 'change_student_status' student.pk %}" class="block w-full text-center px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50">
                           Change Status
                       </a>
                       <a href="#" class="block w-full text-center px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50">
                           Edit Profile
                       </a>
                       <a href="#" class="block w-full text-center px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50">
                           View Grades
                       </a>
                       <a href="#" class="block w-full text-center px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50">
                           View Attendance
                       </a>
                   </div>
               </div>
           </div>
       </div>
   </div>
   {% endblock %}
   EOF
   ```
3. Create enrollment template:
   ```bash
   cat > /Users/saidamenmambayao/apps/madaris-ms/src/apps/constituents/templates/constituents/enroll_student.html << 'EOF'
   {% extends "base.html" %}
   {% load static %}

   {% block title %}Enroll New Student - {{ block.super }}{% endblock %}

   {% block content %}
   <div class="container mx-auto px-4 py-8">
       <div class="max-w-3xl mx-auto">
           <!-- Header -->
           <div class="mb-6">
               <a href="{% url 'student_list' %}" class="text-blue-600 hover:text-blue-800 mb-4 inline-block">
                   ← Back to Students
               </a>
               <h1 class="text-3xl font-bold text-gray-900">Enroll New Student</h1>
               <p class="text-gray-600 mt-2">Fill in the student information to enroll them in the system.</p>
           </div>

           <!-- Form -->
           <div class="bg-white rounded-lg shadow p-6">
               <form method="post" class="space-y-6">
                   {% csrf_token %}

                   <!-- Display form errors -->
                   {% if form.non_field_errors %}
                   <div class="bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded">
                       {{ form.non_field_errors }}
                   </div>
                   {% endif %}

                   <!-- Personal Information Section -->
                   <div>
                       <h3 class="text-lg font-medium text-gray-900 mb-4">Personal Information</h3>
                       <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                           {% for field in form %}
                               {% if field.name in 'first_name,last_name,birth_date,gender,address' %}
                               <div class="{% if field.name == 'address' %}md:col-span-2{% endif %}">
                                   <label for="{{ field.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                                       {{ field.label }}
                                       {% if field.field.required %}<span class="text-red-500">*</span>{% endif %}
                                   </label>
                                   {{ field }}
                                   {% if field.errors %}
                                   <p class="mt-1 text-sm text-red-600">{{ field.errors.0 }}</p>
                                   {% endif %}
                                   {% if field.help_text %}
                                   <p class="mt-1 text-sm text-gray-500">{{ field.help_text }}</p>
                                   {% endif %}
                               </div>
                               {% endif %}
                           {% endfor %}
                       </div>
                   </div>

                   <!-- Enrollment Information Section -->
                   <div>
                       <h3 class="text-lg font-medium text-gray-900 mb-4">Enrollment Information</h3>
                       <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                           {% for field in form %}
                               {% if field.name in 'madrasah,current_grade_level,madrasah_name,year_enrolled' %}
                               <div>
                                   <label for="{{ field.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                                       {{ field.label }}
                                       {% if field.field.required %}<span class="text-red-500">*</span>{% endif %}
                                   </label>
                                   {{ field }}
                                   {% if field.errors %}
                                   <p class="mt-1 text-sm text-red-600">{{ field.errors.0 }}</p>
                                   {% endif %}
                               </div>
                               {% endif %}
                           {% endfor %}
                       </div>
                   </div>

                   <!-- Family Information Section -->
                   <div>
                       <h3 class="text-lg font-medium text-gray-900 mb-4">Family Information</h3>
                       <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                           {% for field in form %}
                               {% if field.name in 'father_name,mother_name,guardian_name,guardian_contact' %}
                               <div>
                                   <label for="{{ field.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                                       {{ field.label }}
                                       {% if field.field.required %}<span class="text-red-500">*</span>{% endif %}
                                   </label>
                                   {{ field }}
                                   {% if field.errors %}
                                   <p class="mt-1 text-sm text-red-600">{{ field.errors.0 }}</p>
                                   {% endif %}
                               </div>
                               {% endif %}
                           {% endfor %}
                       </div>
                   </div>

                   <!-- Form Actions -->
                   <div class="flex justify-end space-x-3 pt-4 border-t">
                       <a href="{% url 'student_list' %}" class="btn btn-secondary">
                           Cancel
                       </a>
                       <button type="submit" class="btn btn-primary">
                           Enroll Student
                       </button>
                   </div>
               </form>
           </div>
       </div>
   </div>
   {% endblock %}
   EOF
   ```
4. Create status change template:
   ```bash
   cat > /Users/saidamenmambayao/apps/madaris-ms/src/apps/constituents/templates/constituents/change_student_status.html << 'EOF'
   {% extends "base.html" %}
   {% load static %}

   {% block title %}Change Status - {{ student.first_name }} {{ student.last_name }} - {{ block.super }}{% endblock %}

   {% block content %}
   <div class="container mx-auto px-4 py-8">
       <div class="max-w-2xl mx-auto">
           <!-- Header -->
           <div class="mb-6">
               <a href="{% url 'student_detail' student.pk %}" class="text-blue-600 hover:text-blue-800 mb-4 inline-block">
                   ← Back to Student Profile
               </a>
               <h1 class="text-2xl font-bold text-gray-900">Change Enrollment Status</h1>
               <p class="text-gray-600 mt-2">
                   Student: {{ student.first_name }} {{ student.last_name }} ({{ student.student_number }})
               </p>
           </div>

           <!-- Current Status -->
           <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
               <p class="text-sm text-blue-800">
                   <strong>Current Status:</strong>
                   <span class="ml-2 inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-blue-100">
                       {{ student.get_enrollment_status_display }}
                   </span>
               </p>
           </div>

           <!-- Form -->
           <div class="bg-white rounded-lg shadow p-6">
               <form method="post">
                   {% csrf_token %}

                   {% if form.non_field_errors %}
                   <div class="bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded mb-4">
                       {{ form.non_field_errors }}
                   </div>
                   {% endif %}

                   <div class="space-y-4">
                       {% for field in form %}
                       <div>
                           <label for="{{ field.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                               {{ field.label }}
                               {% if field.field.required %}<span class="text-red-500">*</span>{% endif %}
                           </label>
                           {{ field }}
                           {% if field.errors %}
                           <p class="mt-1 text-sm text-red-600">{{ field.errors.0 }}</p>
                           {% endif %}
                           {% if field.help_text %}
                           <p class="mt-1 text-sm text-gray-500">{{ field.help_text }}</p>
                           {% endif %}
                       </div>
                       {% endfor %}
                   </div>

                   <div class="flex justify-end space-x-3 mt-6 pt-4 border-t">
                       <a href="{% url 'student_detail' student.pk %}" class="btn btn-secondary">
                           Cancel
                       </a>
                       <button type="submit" class="btn btn-primary">
                           Change Status
                       </button>
                   </div>
               </form>
           </div>
       </div>
   </div>
   {% endblock %}
   EOF
   ```
5. Update views to use pagination:
   ```python
   # Update student_list view in views.py
   from django.core.paginator import Paginator

   @login_required
   def student_list(request):
       students = Student.objects.all()

       # Apply filters...
       # (existing filter code)

       # Pagination
       paginator = Paginator(students, 25)  # Show 25 students per page
       page_number = request.GET.get('page')
       students = paginator.get_page(page_number)

       return render(request, 'constituents/student_list.html', {
           'students': students,
           'status_choices': Student.EnrollmentStatus.choices,
       })
   ```

## Acceptance Criteria:
- Student list template created
- Student detail template created
- Student enrollment template created
- Student profile template created
- Status change template created
- Templates use base template
- Templates use context processor
- Templates are responsive
- Templates tested

## Files Modified:
- `src/apps/constituents/templates/constituents/student_list.html`
- `src/apps/constituents/templates/constituents/student_detail.html`
- `src/apps/constituents/templates/constituents/enroll_student.html`
- `src/apps/constituents/templates/constituents/change_student_status.html`
- `src/apps/constituents/views.py (updated for pagination)`

## Important Notes:
- Templates use Tailwind CSS for styling
- Responsive design for mobile/tablet/desktop
- Status badges color-coded for visual clarity
- Form validation errors displayed clearly
- Pagination added to list view
- Estimate: 1.5 hours

## Testing:
- [ ] Test student list renders correctly
- [ ] Test student detail page displays all info
- [ ] Test enrollment form validation
- [ ] Test status change form
- [ ] Test responsive design
- [ ] Test pagination

# Test Strategy:
1. Load page in browser and verify visual changes
2. Test responsive design on mobile and desktop
3. Verify no console errors in browser DevTools
4. Test form submissions if applicable
5. Access view URL and verify HTTP 200 response
6. Test with different user permissions
7. Verify context data passed to template
8. Test any query parameters or filters